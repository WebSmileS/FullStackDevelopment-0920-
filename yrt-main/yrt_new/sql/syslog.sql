CREATE TABLE sys_job (job_id int NOT NULL AUTO_INCREMENT COMMENT '任务ID', job_name varchar(64) NOT NULL COMMENT '任务名称', job_group varchar(64) NOT NULL COMMENT '任务组名', method_name varchar(500) COMMENT '任务方法', method_params varchar(50) COMMENT '方法参数', cron_expression varchar(255) COMMENT 'cron执行表达式', misfire_policy varchar(20) DEFAULT '3' COMMENT '计划执行错误策略（1立即执行 2执行一次 3放弃执行）', concurrent char(1) DEFAULT '1' COMMENT '是否并发执行（0允许 1禁止）', status char(1) DEFAULT '0' COMMENT '状态（0正常 1暂停）', create_by varchar(64) COMMENT '创建者', create_time datetime COMMENT '创建时间', update_by varchar(64) COMMENT '更新者', update_time datetime COMMENT '更新时间', remark varchar(500) COMMENT '备注信息', PRIMARY KEY (job_id, job_name, job_group)) ENGINE=InnoDB DEFAULT CHARSET=utf8 DEFAULT COLLATE=utf8_general_ci COMMENT='定时任务调度表';
CREATE TABLE sys_job_log (job_log_id int NOT NULL AUTO_INCREMENT COMMENT '任务日志ID', job_name varchar(64) NOT NULL COMMENT '任务名称', job_group varchar(64) NOT NULL COMMENT '任务组名', method_name varchar(500) COMMENT '任务方法', method_params varchar(50) COMMENT '方法参数', job_message varchar(500) COMMENT '日志信息', status char(1) DEFAULT '0' COMMENT '执行状态（0正常 1失败）', exception_info varchar(2000) COMMENT '异常信息', create_time datetime COMMENT '创建时间', PRIMARY KEY (job_log_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8 DEFAULT COLLATE=utf8_general_ci COMMENT='定时任务调度日志表';
CREATE TABLE sys_oper_log (oper_id int NOT NULL AUTO_INCREMENT COMMENT '日志主键', title varchar(50) COMMENT '模块标题', business_type int(2) DEFAULT 0 COMMENT '业务类型（0其它 1新增 2修改 3删除）', method varchar(100) COMMENT '方法名称', operator_type int(1) DEFAULT 0 COMMENT '操作类别（0其它 1后台用户 2手机端用户）', oper_name varchar(50) COMMENT '操作人员', dept_name varchar(50) COMMENT '部门名称', oper_url varchar(255) COMMENT '请求URL', oper_ip varchar(50) COMMENT '主机地址', oper_location varchar(255) COMMENT '操作地点', oper_param varchar(2000) COMMENT '请求参数', status int(1) DEFAULT 0 COMMENT '操作状态（0正常 1异常）', error_msg varchar(2000) COMMENT '错误消息', oper_time datetime COMMENT '操作时间', PRIMARY KEY (oper_id)) ENGINE=InnoDB DEFAULT CHARSET=utf8 DEFAULT COLLATE=utf8_general_ci COMMENT='操作日志记录';
